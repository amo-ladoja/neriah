{
  "userStories": [
    {
      "id": "US-1",
      "title": "Sign Up & Immediate Value",
      "priority": "P0",
      "persona": "busy professional",
      "action": "sign in with one click and immediately see my actionable emails",
      "benefit": "I can start being productive without any setup",
      "acceptanceCriteria": [
        "✅ \"Sign in with Google\" button on landing page",
        "✅ Single OAuth flow grants auth + Gmail read access",
        "✅ User sees \"Analyzing your inbox...\" loading state",
        "✅ First tasks appear within 60 seconds",
        "✅ No additional setup steps required"
      ],
      "status": "completed",
      "completedCriteria": 5,
      "totalCriteria": 5,
      "notes": "Fully implemented: OAuth, Gmail API integration, Claude extraction, initial extraction endpoint"
    },
    {
      "id": "US-2",
      "title": "View My Action Items",
      "priority": "P0",
      "persona": "Neriah user",
      "action": "see all my actionable items in one clean list",
      "benefit": "I know exactly what needs my attention",
      "acceptanceCriteria": [
        "✅ Dashboard shows list of extracted items",
        "✅ Each item shows: title, sender, category, time received",
        "✅ Items sorted by priority/recency",
        "✅ Can filter by category (All, Tasks, Receipts, Meetings, Snoozed)",
        "✅ Empty state if no items (with encouraging message)"
      ],
      "status": "completed",
      "completedCriteria": 5,
      "totalCriteria": 5,
      "notes": "Dashboard fully functional with real data, real-time subscriptions, filtering, sorting, and empty state message"
    },
    {
      "id": "US-3",
      "title": "Reply to Email",
      "priority": "P0",
      "persona": "Neriah user",
      "action": "quickly reply to an email that needs response",
      "benefit": "I can take action without leaving my workflow",
      "acceptanceCriteria": [
        "✅ \"Reply\" button on each relevant item",
        "✅ Tapping opens Gmail compose in new tab/app",
        "✅ Gmail compose pre-filled with: To, Subject (Re:), thread context",
        "✅ After sending, user can mark item complete in Neriah"
      ],
      "status": "completed",
      "completedCriteria": 4,
      "totalCriteria": 4,
      "notes": "Fully implemented: Reply button, Gmail deep link generation, pre-filled compose, mark complete available"
    },
    {
      "id": "US-4",
      "title": "View Invoice/Attachment",
      "priority": "P0",
      "persona": "Neriah user",
      "action": "view invoices and attachments without digging through email",
      "benefit": "I can quickly review documents that need attention",
      "acceptanceCriteria": [
        "✅ Items with attachments show attachment icon",
        "✅ \"View Invoice\" / \"View Attachment\" button",
        "✅ PDF viewer opens in-app (or new tab)",
        "✅ Image attachments display inline",
        "✅ Can download attachment"
      ],
      "status": "completed",
      "completedCriteria": 5,
      "totalCriteria": 5,
      "notes": "Fully implemented: Attachment API endpoint, in-app PDF/image viewer, download functionality"
    },
    {
      "id": "US-5",
      "title": "Complete an Item",
      "priority": "P0",
      "persona": "Neriah user",
      "action": "mark items as complete when I've handled them",
      "benefit": "my list stays clean and focused",
      "acceptanceCriteria": [
        "✅ \"Done\" / checkmark button on each item",
        "✅ Completed items move to \"Completed\" section (or hide)",
        "❌ Can undo completion within 5 seconds",
        "✅ Completion syncs to database immediately"
      ],
      "status": "in_progress",
      "completedCriteria": 3,
      "totalCriteria": 4,
      "notes": "Done button, API endpoint, database sync, and filtering all working. Completed items are hidden from main list. Need: Undo functionality"
    },
    {
      "id": "US-6",
      "title": "Receive New Items Automatically",
      "priority": "P0",
      "persona": "Neriah user",
      "action": "have new actionable items appear automatically",
      "benefit": "I don't miss anything important",
      "acceptanceCriteria": [
        "✅ Background sync runs every 3 hours",
        "✅ New items appear at top of list",
        "✅ Push notification: \"3 new items need attention\"",
        "✅ Badge count updates on PWA icon",
        "✅ Can manually trigger sync (pull-to-refresh)"
      ],
      "status": "completed",
      "completedCriteria": 5,
      "totalCriteria": 5,
      "notes": "Fully implemented: Cron job every 3 hours, push notifications, badge updates, manual sync button, real-time updates"
    },
    {
      "id": "US-7",
      "title": "Snooze an Item",
      "priority": "P1",
      "persona": "Neriah user",
      "action": "snooze items I can't handle right now",
      "benefit": "they resurface when I'm ready",
      "acceptanceCriteria": [
        "✅ \"Snooze\" button with options: 3 hours, Tomorrow 9am, Next week",
        "✅ Snoozed items disappear from main list",
        "✅ Items reappear at scheduled time",
        "✅ Can view all snoozed items in separate section"
      ],
      "status": "completed",
      "completedCriteria": 4,
      "totalCriteria": 4,
      "notes": "Fully implemented: Snooze button with dropdown, API endpoint, cron job resurface logic (unsnoozeExpiredItems), snoozed tab in dashboard"
    },
    {
      "id": "US-8",
      "title": "Schedule Meeting from Email",
      "priority": "P1",
      "persona": "Neriah user",
      "action": "schedule meetings from email requests",
      "benefit": "I can book time without switching apps",
      "acceptanceCriteria": [
        "✅ Items with meeting requests show \"Schedule Meeting\" button",
        "✅ Tapping opens Google Calendar with pre-filled: title, time, attendees, description",
        "✅ Can schedule directly or edit before creating",
        "✅ After scheduling, can mark item complete",
        "✅ Handles multiple suggested times from email"
      ],
      "status": "completed",
      "completedCriteria": 5,
      "totalCriteria": 5,
      "notes": "Fully implemented: Schedule button, Google Calendar deep link generation, pre-filled meeting data, mark complete available"
    },
    {
      "id": "US-9",
      "title": "View Categorized Receipts",
      "priority": "P0",
      "persona": "Neriah user",
      "action": "see receipts auto-categorized by expense type",
      "benefit": "I can quickly find and review expenses",
      "acceptanceCriteria": [
        "✅ Receipts extracted with vendor, amount, date, invoice number",
        "✅ AI assigns category: Software, Travel, Medical, Office, Meals, Utilities, Other",
        "✅ Can filter dashboard: \"Show only Travel receipts\"",
        "✅ Receipt details display in structured format (vendor, amount, date, category)",
        "✅ Category badge shows on each receipt item"
      ],
      "status": "completed",
      "completedCriteria": 5,
      "totalCriteria": 5,
      "notes": "Fully implemented: Receipt extraction with OCR, AI categorization, filtering by category, structured display"
    },
    {
      "id": "US-10",
      "title": "Review Receipt Details",
      "priority": "P0",
      "persona": "Neriah user",
      "action": "view receipt PDFs and extracted details",
      "benefit": "I can verify expense information",
      "acceptanceCriteria": [
        "✅ \"View Receipt\" button opens in-app PDF viewer",
        "✅ Shows extracted: Vendor, Amount, Currency, Date, Invoice #, Category, Tax",
        "✅ Can download original PDF or image",
        "✅ Image receipts display inline",
        "✅ OCR confidence score displayed"
      ],
      "status": "completed",
      "completedCriteria": 5,
      "totalCriteria": 5,
      "notes": "Fully implemented: Receipt viewer, extracted details display, download functionality, inline image display"
    },
    {
      "id": "US-11",
      "title": "Provide Feedback on Extractions",
      "priority": "P1",
      "persona": "Neriah user",
      "action": "mark extractions as correct/incorrect",
      "benefit": "the AI improves over time and I can report issues",
      "acceptanceCriteria": [
        "✅ Thumbs up/down buttons on each item (tasks, receipts, meetings)",
        "❌ Optional: \"What was wrong?\" comment field",
        "✅ Feedback saved immediately",
        "❌ Visual confirmation after submission (\"Thanks for your feedback!\")",
        "❌ Can change feedback after submission"
      ],
      "status": "in_progress",
      "completedCriteria": 2,
      "totalCriteria": 5,
      "notes": "Thumbs up/down buttons and API endpoint working. Feedback saved to database. Need: Comment field, visual confirmation toast, ability to change feedback"
    },
    {
      "id": "US-12",
      "title": "Query Dashboard via Chat",
      "priority": "P1",
      "persona": "Neriah user",
      "action": "ask questions about my items in natural language",
      "benefit": "I can quickly find specific information without manual filtering",
      "acceptanceCriteria": [
        "✅ Chat icon accessible in bottom navigation",
        "✅ Can type natural language queries (e.g., \"What are my urgent tasks?\")",
        "✅ AI returns relevant items from dashboard data",
        "✅ Results display as tappable item cards in chat",
        "✅ Can tap items to open full detail view",
        "✅ Conversation history maintained within session"
      ],
      "status": "completed",
      "completedCriteria": 6,
      "totalCriteria": 6,
      "notes": "Fully implemented: Chat page at /chat, bottom nav icon, /api/chat/query endpoint, item cards in response, navigation to detail, chat history with Supabase persistence"
    },
    {
      "id": "US-13",
      "title": "Get Spending Insights via Chat",
      "priority": "P1",
      "persona": "Neriah user",
      "action": "ask about my spending and receipt totals",
      "benefit": "I can understand my expenses without manual calculation",
      "acceptanceCriteria": [
        "✅ Can ask \"How much did I spend last month?\"",
        "✅ Can filter by category (e.g., \"Total software expenses?\")",
        "✅ Can filter by vendor (e.g., \"How much have I paid AWS?\")",
        "✅ Response shows calculated total with currency",
        "✅ Response lists contributing receipts (tappable)",
        "✅ Can ask follow-up questions in same conversation"
      ],
      "status": "completed",
      "completedCriteria": 6,
      "totalCriteria": 6,
      "notes": "Fully implemented: /api/chat/calculate endpoint with date range, category, and vendor filtering. Shows total with currency and receipt list. Chat history enables follow-ups."
    },
    {
      "id": "US-14",
      "title": "Attach Items to Chat",
      "priority": "P1",
      "persona": "Neriah user",
      "action": "attach specific items to the chat for contextual questions",
      "benefit": "I can get AI help with particular tasks or receipts",
      "acceptanceCriteria": [
        "✅ \"+\" button in chat input area opens item picker",
        "✅ Can select one or more items from dashboard",
        "✅ Selected items appear as cards above chat input",
        "✅ Can remove attached items before sending",
        "✅ AI responses are contextual to attached items",
        "✅ Can attach items from any category (tasks, receipts, meetings)"
      ],
      "status": "completed",
      "completedCriteria": 6,
      "totalCriteria": 6,
      "notes": "Fully implemented: + button opens item picker modal with tabs (all/task/receipt/meeting), multi-select, attached items shown above input with remove button, attachedItemIds sent to API"
    },
    {
      "id": "US-15",
      "title": "Draft Responses via Chat",
      "priority": "P1",
      "persona": "Neriah user",
      "action": "ask the chat to help me write email replies",
      "benefit": "I can respond faster with AI assistance",
      "acceptanceCriteria": [
        "✅ Can attach a task item and ask \"Write a reply\"",
        "✅ AI generates draft based on email context",
        "✅ Can specify tone or key points (e.g., \"Decline politely\")",
        "✅ Draft displayed in chat with copy button",
        "✅ \"Open Gmail\" button to paste and send",
        "✅ Can ask to regenerate or modify the draft"
      ],
      "status": "completed",
      "completedCriteria": 6,
      "totalCriteria": 6,
      "notes": "Fully implemented: /api/chat/draft endpoint, draft detection routing, AssistantMessage renders draft with Copy and Open Gmail buttons, regeneration possible via new message"
    }
  ]
}
